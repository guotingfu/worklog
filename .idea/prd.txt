WorkLog (安卓版) 产品需求文档 (PRD)
文档版本	V1.0
项目名称	WorkLog (Android)
产品定位	隐私优先的“反向时薪”工时记录工具
核心理念	拒绝无效加班，通过量化“真实时薪”鼓励工作生活平衡
1. 产品概述
1.1 背景与目标
将现有的 Web 端 WorkLog 应用移植为原生 Android 应用。应用核心在于通过记录实际工作时长，结合用户的年薪，反向计算出“真实时薪”。如果用户加班，真实时薪会降低；如果用户高效完成工作（少投入时间），真实时薪会升高。
1.2 核心特性
完全离线：数据存储在本地（SQLite/Room），无账号体系。
长按交互：防止误触的“上班/下班”打卡体验。
薪资隐私：一键隐藏金额显示。
数据可视化：多维度的工时与时薪图表。
2. 信息架构 (IA) 与导航
应用采用底部导航栏 (Bottom Navigation Bar) 结构，包含四个主要模块：
首页 (Home)：核心打卡功能、实时计时、薪资看板。
统计 (Stats)：图表分析、时薪对比、加班统计。
计算器 (Calculator)：独立的薪资总包估算工具。
设置 (Settings)：基础配置、数据管理、主题设置。
3. 功能详细需求
3.1 首页 (Home)
功能逻辑：
状态展示：
显示当前日期。
状态标签：显示“工作中”或“未打卡”。工作中需有呼吸灯（Pulse）动画效果。
实时计时器：
显示格式：HH:MM:SS。
逻辑：若当前有进行中的会话（Session），显示 当前时间 - 开始时间 的差值；若无，显示 00:00:00。
核心操作按钮 (长按交互)：
交互：不支持点击，必须长按（约 1.5秒）触发。
UI反馈：长按时，圆环进度条随时间填充。填满后触发震动反馈（Haptic Feedback）并执行操作。
逻辑：
未开始时：长按 -> 开始工作 (创建新 Session，记录 startTime)。
工作中：长按 -> 结束工作 (更新当前 Session，记录 endTime) -> 触发全屏彩带 (Confetti) 动画。
薪资看板：
显示“年薪”卡片。
隐私模式：点击“眼睛”图标，在具体金额（如 ¥30.0w）与掩码（****）之间切换。
安卓特性要求：
后台保活：即使用户退出应用，计时器逻辑不能通过后台服务持续运行耗电，而是应记录时间戳，在 onResume 时重新计算差值。
主要颜色：
上班状态：Indigo (蓝紫色)
下班状态：Red (红色，提示停止工作)
3.2 统计 (Stats)
功能逻辑：
筛选维度：提供 本周、本月、季度、全年 四个时间维度切换。
单位切换：提供 小时 (h) / 分钟 (m) 切换。
图表展示 (Bar Chart)：
X轴：根据筛选维度显示（如周一周日，或 1月12月）。
Y轴：工时长度。
堆叠/颜色逻辑：区分“正常工时”与“加班工时”。
正常工时：Indigo 色。
加班工时：Red 色（通过设置中的上下班时间计算得出）。
核心数据卡片：
总工时：所选周期内的总时长。
实际时薪 (Real Hourly Wage)：这是产品的核心算法。
算法：周期内固定薪资 / max(实际总工时, 标准总工时)。
逻辑：如果 实际工时 > 标准工时，时薪会下降（显示红色向下箭头及下降百分比）；如果 实际工时 <= 标准工时，显示标准时薪（显示绿色达标图标）。
目的：告诉用户“加班会让你的单位时间价值贬值”。
加班统计：如果存在加班，显示一段文案：“本周期额外工作了 XX 小时”。
3.3 计算器 (Calculator)
此模块与打卡数据不互通，是一个独立的工具。
输入项：
月薪 (Base)
月数 (Months, 默认为 12)
年终奖金 (Bonus)
股票数量 (Stock Qty)
单股价格 (Stock Price)
签字费/其他 (Other)
输出项：
预估年总包 (Total Package)：实时计算上述总和，并格式化为货币样式。
3.4 设置 (Settings)
配置项：
工作配置：
年薪输入（用于统计页的时薪计算）。
标准上班时间（如 09:00）。
标准下班时间（如 18:00）。
外观：
浅色 / 深色 / 跟随系统（Android DayNight Theme）。
数据管理：
数据备份：导出为 JSON 文件（调用 Android 系统分享或文件存储意图）。
近期记录：列表展示最近 10 条打卡记录。
支持删除单条记录。
支持添加备注（Note）。
3.5 引导页 (Onboarding)
仅在用户首次安装打开时显示。
3个核心卖点轮播或列表：
完全离线：无网络请求。
隐私安全：薪资数据本地存储。
反向时薪：核心价值观介绍。
4. 核心算法逻辑 (后端逻辑复刻)
在安卓端实现 Stats 模块时，需严格遵循以下计算逻辑：
单次 Session 拆分：
获取 Session 的 startTime 和 endTime。
判断该日期是否为周末（周六/周日）。
是周末：全时段计为 加班 (Overtime)。
是工作日：
获取用户设置的 standardStart (e.g., 09:00) 和 standardEnd (e.g., 18:00)。
计算 Session 与 [09:00, 18:00] 区间的交集。
交集部分 = 正常工时 (Regular)。
总时长 - 正常工时 = 加班工时 (Overtime)。
注意：早到或晚退都算加班。
时薪计算：
PeriodFixedPay (周期固定薪资) = 年薪 / (52周 or 12月 or 4季 or 1年)。
StandardHours (标准工时) = (标准下班时间 - 标准上班时间) * 周期内工作日天数。
ActualHours (实际工时) = 用户打卡总时长。
EffectiveHours (有效计薪时长) = Math.max(StandardHours, ActualHours)。
解释：如果用户早退（摸鱼），分母依然按标准工时算，不会因此显示出虚高的天价时薪（为了鼓励健康工作，而不是纯粹旷工）。只有当加班时，分母变大，时薪才会降低。
真实时薪 = PeriodFixedPay / EffectiveHours。
5. 技术栈推荐 (Android)
语言: Kotlin
UI 框架: Jetpack Compose (推荐，因为原项目是 React 声明式 UI，Compose 更容易迁移逻辑)。
架构: MVVM (Model-View-ViewModel)。
本地存储: Room Database (用于存 Session) + DataStore (用于存 Settings)。
图表库: Vico 或 MPAndroidChart (对标 React 的 Recharts)。
日期处理: java.time API (LocalDate, Duration)。
AI 扩展 (可选): 集成 Google Gemini Android SDK，用于生成周报或毒鸡汤（对应原代码中的 geminiService.ts）。
6. UI/UX 设计规范
色彩系统：
Primary: Indigo 500 (#6366f1)
Danger/Stop: Red 500 (#ef4444)
Success: Green 500 (#22c55e)
Background: Slate 50 (Light) / Slate 950 (Dark)
动画：
长按按钮需要平滑的 SVG 路径动画（Circle Progress）。
打卡成功需要粒子发射效果（参考 Konfetti 库）。
震动：
长按完成瞬间必须有明确的震动反馈。